<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dashboard</title>

    <!-- Fonts & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

    <!-- Styles (Flask static) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"/>

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">
                <i class="fas fa-thermometer-half"></i>
                Proyecto-IoT
            </div>
            <ul class="nav-links">
                <li><a href="#" class="active">Dashboard</a></li>
                <li><a href="#">Dispositivos</a></li>

            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Monitoreo Climático IoT</h1>
            <p class="dashboard-subtitle">Sistema de monitoreo de temperatura y humedad en tiempo real</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Temperatura Promedio</span>
                    <div class="stat-icon temp-icon">
                        <i class="fas fa-thermometer-half"></i>
                    </div>
                </div>
                <div class="stat-value">23.5°C</div>
                <div class="stat-info">
                    <span class="stat-location">Todas las aulas</span>
                    <span class="stat-trend trend-stable">
                        <i class="fas fa-minus"></i> Estable
                    </span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Humedad Promedio</span>
                    <div class="stat-icon humidity-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                </div>
                <div class="stat-value">62%</div>
                <div class="stat-info">
                    <span class="stat-location">Todas las aulas</span>
                    <span class="stat-trend trend-down">
                        <i class="fas fa-arrow-down"></i> -2%
                    </span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Dispositivos Activos</span>
                    <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #a855f7); color: white;">
                        <i class="fas fa-microchip"></i>
                    </div>
                </div>
                <div class="stat-value">3</div>
                <div class="stat-info">
                    <span class="stat-location">Total de sensores</span>
                    <span class="stat-trend" style="background: #f0fdf4; color: #16a34a;">
                        <i class="fas fa-check"></i> Conectados
                    </span>
                </div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <h3 class="chart-title">Tendencias Temporales</h3>
                    <div class="time-selector">
                        <button class="time-btn">1H</button>
                        <button class="time-btn active">24H</button>
                        <button class="time-btn">7D</button>
                        <button class="time-btn">30D</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>

            <div class="alerts-section">
                <h3 class="section-title">
                    <i class="fas fa-bell"></i>
                    Alertas Recientes
                </h3>

                <div class="alert-item alert-warning">
                    <div class="alert-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Humedad Elevada</div>
                        <div class="alert-description">Aula 201 - 78% humedad</div>
                        <div class="alert-time">Hace 15 min</div>
                    </div>
                </div>

                <div class="alert-item alert-success">
                    <div class="alert-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Condiciones Óptimas</div>
                        <div class="alert-description">Aula 102 - Temperatura ideal</div>
                        <div class="alert-time">Hace 30 min</div>
                    </div>
                </div>

                <div class="alert-item alert-danger">
                    <div class="alert-icon">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Temperatura Alta</div>
                        <div class="alert-description">Aula 305 - 28.5°C</div>
                        <div class="alert-time">Hace 1h</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="devices-grid">
            <div class="device-card">
                <div class="device-header">
                    <div class="device-name">
                        <div class="device-status"></div>
                        Sensor Aula 102
                    </div>
                    <i class="fas fa-cog" style="color: #94a3b8; cursor: pointer;"></i>
                </div>
                <div class="device-metrics">
                    <div class="metric">
                        <div class="metric-value">22.1°C</div>
                        <div class="metric-label">Temperatura</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">58%</div>
                        <div class="metric-label">Humedad</div>
                    </div>
                </div>
            </div>

            <div class="device-card">
                <div class="device-header">
                    <div class="device-name">
                        <div class="device-status"></div>
                        Sensor Aula 201
                    </div>
                    <i class="fas fa-cog" style="color: #94a3b8; cursor: pointer;"></i>
                </div>
                <div class="device-metrics">
                    <div class="metric">
                        <div class="metric-value">24.2°C</div>
                        <div class="metric-label">Temperatura</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">78%</div>
                        <div class="metric-label">Humedad</div>
                    </div>
                </div>
            </div>

            <div class="device-card">
                <div class="device-header">
                    <div class="device-name">
                        <div class="device-status"></div>
                        Sensor Aula 305
                    </div>
                    <i class="fas fa-cog" style="color: #94a3b8; cursor: pointer;"></i>
                </div>
                <div class="device-metrics">
                    <div class="metric">
                        <div class="metric-value">28.5°C</div>
                        <div class="metric-label">Temperatura</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value">45%</div>
                        <div class="metric-label">Humedad</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Chart.js configuration
        const ctx = document.getElementById('mainChart').getContext('2d');

        // Generate sample data
        const hours = [];
        const tempData = [];
        const humidityData = [];

        for (let i = 23; i >= 0; i--) {
            hours.push(`${23 - i}:00`);
            tempData.push(20 + Math.random() * 8);
            humidityData.push(45 + Math.random() * 30);
        }

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: hours,
                datasets: [
                    {
                        label: 'Temperatura (°C)',
                        data: tempData,
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#ff6b6b',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    },
                    {
                        label: 'Humedad (%)',
                        data: humidityData,
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#4ecdc4',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20,
                            font: {
                                size: 12,
                                weight: '600'
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        grid: { display: false },
                        border: { display: false },
                        ticks: {
                            color: '#64748b',
                            font: { size: 11 }
                        }
                    },
                    y: {
                        grid: { color: 'rgba(100, 116, 139, 0.1)' },
                        border: { display: false },
                        ticks: {
                            color: '#64748b',
                            font: { size: 11 }
                        }
                    }
                },
                interaction: { intersect: false, mode: 'index' },
                elements: { point: { hoverRadius: 8 } }
            }
        });

        // Time selector functionality
        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                const active = document.querySelector('.time-btn.active');
                if (active) active.classList.remove('active');
                this.classList.add('active');
            });
        });

        // Real-time data simulation (placeholder)
        function updateData() {
            // Aquí harías fetch a tu backend Flask, por ejemplo:
            // fetch('/api/sensors/data').then(r => r.json()).then(updateUI);
        }
        setInterval(updateData, 30000);

        // Entrance animations
        document.addEventListener('DOMContentLoaded', function () {
            const cards = document.querySelectorAll('.stat-card, .chart-card, .device-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
    </script>
</body>
</html>
